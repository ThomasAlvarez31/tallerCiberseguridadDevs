<!DOCTYPE html>
<html>
<head>
    <title>Ejercicio DEVS</title>
    <style>
        .ejercicio { border: 2px solid blue; padding: 15px; margin: 10px; }
        .problema { background: #ffe6e6; padding: 10px; }
        .solucion { background: #e6ffe6; padding: 10px; display: none; }
    </style>
</head>
<body>
    <h1>üéØ Ejercicio Pr√°ctico</h1>

    <div class="ejercicio">
        <h2>Problema: Comentarios Vulnerables a XSS</h2>
        
        <div class="problema">
            <h3>üî¥ C√ìDIGO ACTUAL (VULNERABLE):</h3>
            <input type="text" id="comentarioInput" placeholder='Ingrese su comentario'>
            <button onclick="agregarComentarioVulnerable()">Agregar Comentario (VULNERABLE)</button>
            <div id="comentariosBox" style="border: 1px solid red; min-height: 100px; padding: 10px;"></div>
        </div>

        <button onclick="mostrarSolucion()">Ver Soluci√≥n</button>
        
        <div id="solucionBox" class="solucion">
            <h3>‚úÖ SOLUCI√ìN SEGURA:</h3>
            <button onclick="agregarComentarioSeguro()">Agregar Comentario (SEGURO)</button>
            <p><strong>¬øPor qu√© es seguro?</strong> Usamos <code>createElement</code> y <code>textContent</code> en lugar de <code>innerHTML</code></p>
        </div>
    </div>

    <script>
        // üî¥ C√ìDIGO VULNERABLE - ¬°FUNCIONA el ataque!
        function agregarComentarioVulnerable() {
            const comentario = document.getElementById('comentarioInput').value;
            
            // ‚ùå VULNERABLE - permite XSS
            document.getElementById('comentariosBox').innerHTML += 
                `<div class="comentario">${comentario}</div>`;
        }

        // ‚úÖ C√ìDIGO SEGURO
        function agregarComentarioSeguro() {
            const comentario = document.getElementById('comentarioInput').value;
            
            // ‚úÖ SEGURO - no permite XSS
            const div = document.createElement('div');
            div.className = 'comentario';
            div.textContent = comentario;
            
            document.getElementById('comentariosBox').appendChild(div);
        }

        function mostrarSolucion() {
            document.getElementById('solucionBox').style.display = 'block';
        }
    </script>
</body>
</html>